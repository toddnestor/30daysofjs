{"version":3,"sources":["webpack:///webpack/bootstrap f0cdaa4f289cf2cd911b","webpack:///./js/entry.js","webpack:///./js/typeahead.js","webpack:///./js/data-filter.js","webpack:///./css/styles.scss"],"names":["require","document","addEventListener","endpoint","typeahead","getElementById","querySelector","Typeahead","input","suggestions","dataOrEndpoint","el","data","bindKeyups","generateSuggestions","bind","value","filter","then","listCities","cities","showDefault","clearList","forEach","addCity","city","addItem","innerHTML","text","li","createElement","innerText","appendChild","cityName","state","citySpan","classList","add","populationSpan","population","toString","replace","style","cursor","fetching","DataFilter","callbacks","getData","cb","cityData","push","fetch","response","json","re","RegExp","filteredCities","match"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0cdaa4f289cf2cd911b","require('../css/styles.scss');\r\n\r\nimport Typeahead from './typeahead';\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const endpoint = 'https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json';\r\n\r\n  const typeahead = new Typeahead( document.getElementById('city'), document.querySelector('.suggestions'), endpoint );\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/entry.js","import DataFilter from './data-filter';\r\n\r\nclass Typeahead {\r\n  constructor( input, suggestions, dataOrEndpoint ) {\r\n    this.el = input;\r\n    this.suggestions = suggestions;\r\n    this.data = new DataFilter( dataOrEndpoint );\r\n    this.bindKeyups();\r\n  }\r\n\r\n  bindKeyups() {\r\n    this.el.addEventListener('keyup', this.generateSuggestions.bind(this) );\r\n  }\r\n\r\n  generateSuggestions() {\r\n    if( this.el.value )\r\n      this.data.filter(this.el.value).then( cities => this.listCities(cities) );\r\n    else\r\n      this.showDefault();\r\n  }\r\n\r\n  listCities(cities) {\r\n    this.clearList();\r\n    cities.forEach(city => this.addCity(city));\r\n  }\r\n\r\n  showDefault() {\r\n    this.clearList();\r\n    this.addItem('Filter For A City');\r\n    this.addItem('Or A State');\r\n  }\r\n\r\n  clearList() {\r\n    this.suggestions.innerHTML = '';\r\n  }\r\n\r\n  addItem(text) {\r\n    const li = document.createElement('li');\r\n    li.innerText = text;\r\n    this.suggestions.appendChild(li);\r\n    return li;\r\n  }\r\n\r\n  addCity(city) {\r\n    const cityName = `${city.city}, ${city.state}`;\r\n    const li = this.addItem(cityName);\r\n\r\n    const citySpan = document.createElement('span');\r\n    citySpan.classList.add('name');\r\n    citySpan.innerText = cityName;\r\n\r\n    const populationSpan = document.createElement('span');\r\n    populationSpan.classList.add('population');\r\n    populationSpan.innerText = city.population.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\r\n    li.innerHTML = '';\r\n    li.appendChild(citySpan);\r\n    li.appendChild(populationSpan);\r\n\r\n    li.style.cursor = 'pointer';\r\n    li.addEventListener('click', () => {\r\n      this.el.value = cityName;\r\n      this.clearList();\r\n      this.addCity(city);\r\n    });\r\n  }\r\n}\r\n\r\nexport default Typeahead;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/typeahead.js","let fetching = false;\r\n\r\nclass DataFilter {\r\n  constructor(data) {\r\n    this.callbacks = [];\r\n    this.getData(data);\r\n  }\r\n\r\n  cities(cb) {\r\n    if( this.cityData ) {\r\n      cb(this.cityData);\r\n    } else {\r\n      this.callbacks.push(cb);\r\n    }\r\n  }\r\n\r\n  getData(data) {\r\n    if( typeof data === \"string\" ) {\r\n      this.cityData = [];\r\n\r\n      if( !fetching ) {\r\n        fetching = true;\r\n\r\n        fetch(data)\r\n          .then(response => response.json() )\r\n          .then(data => this.cityData.push(...data))\r\n          .then( () => {\r\n            this.callbacks.forEach( cb => cb( this.cityData ) );\r\n          });\r\n      }\r\n    } else {\r\n      this.cityData = data;\r\n    }\r\n  }\r\n\r\n  filter(text) {\r\n    const re = new RegExp(text, 'i');\r\n\r\n    return {\r\n      then: cb => {\r\n        this.cities( cities => {\r\n          const filteredCities = cities.filter( city => city.city.match(re) || city.state.match(re) );\r\n          cb( filteredCities );\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default DataFilter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/data-filter.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/styles.scss\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}